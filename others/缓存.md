# 缓存

### 缓存是什么？

（自己的理解：将一些基本不变的数据存储到内存中，来达到数据加速访问的效果，这就是缓存）

在内存中存储被访问过的数据，供后续访问时使用，以此来达到提速的效果

数据缓存标准：热点数据、静态数据

##### 预读取

即在数据入口处加一道前置的缓冲区：在系统对外部提供服务之前，先将硬盘中的数据加载到内存之中，然后再对外提供服务

对于一启动就面临千万级别的的请求的系统，通过此方式可以缓解数据库压力，如果缓冲还不能解决，可以再考虑横向扩展和负载均衡

##### 延迟写

由于写入数据时有一系列保证数据正确性的机制，所以数据库写入速度慢于读取速度

提高写入速度的方式：分库分表（对跨表操作及多条件组合查询的副作用巨大）、缓存

预先将需要写入到磁盘或数据库的数据，先暂时写入到内存，然后就返回成功，在定时将内存中的数据批量写入到磁盘，使用于对数据完整性要求不太苛刻的场景（如点赞数、参与用户数）

### 在哪里加缓存

1. 浏览器缓存

   一般用于缓存图片、js、css 等，可通过消息头 Cache-Control 进行控制

2. DNS缓存

   更新缓存的速度较慢，至少是分钟级别，适用于不经常变动的静态数据

3. 网关（代理）缓存

   常用的网关缓存有 Varnish、Squid、Nginx

4. 进程内缓存

5. 进程外缓存

   如 redis、memcached

6. 数据库缓存